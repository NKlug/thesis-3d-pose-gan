\section{Prevention of the Effects of Pose Normalization}
\label{sec:network-adjusting}

The results of the previous section show that the network proposed by \citet{drover18} is not viable for practical use as is.
Especially if the camera photographing the poses is not centered at the root joint and the root joint thus is not naturally aligned with the origin of the image plane, a significant increase in MPJPE is measurable.
This motivates further looking into how this increased error can be circumvented and potentially modifying the network.
This section will focus on the error introduced by shifting along the image plane as it shows a far more significant increase in MPJPE than shifting along the z axis.
Again, for simplicity, only shifting along the x axis will be considered.

In \autoref{eq:re-projected-X}, if the 2D points would be re-projected correctly (i.e. shifted back before re-projection), in theory the lower bound in \autoref{eq:delta-d} would no longer apply.
In that case, if the generator estimates all depths $\widetilde{Z}_i$ perfectly (i.e. $\widetilde{Z}_i = Z_i$) the re-projected pose equals the ground truth pose up to a shift.
Thus, in a first attempt to efface the increased error, the re-projection of the poses into three dimensional space is adapted.

\subsection{Network with Correct Re-Projection}

For a correct re-projection of the 2D poses into three dimensions, the network presented earlier is slightly modified.
The network now receives poses that are only normalized in scale, but not in location.
For an input pose $p$, in a first step, the vector $(dx, dy)$ given by the root joint's coordinates is subtracted from all 2D points, such that the 2D pose is now normalized both in scale and location.
Afterwards, the depth offsets $o_i$ are estimated for each point in the same way as in the original network.
Before the pose is then re-projected into three dimensions, the 2D points are shifted back by adding $(dx, dy)$ to each point again.
As explained above, this procedure theoretically circumvents the lower bound found in the previous section.
For the evaluation of this modified network, a pre-trained version of the original network in combination with the correct re-projection is used.
The Protocol 2 MPJPEs are again calculated for different offsets $dx$, while $dy = 0$.
The results for this procedure are shown in \autoref{fig:x-shift-error-correct-reproj} (orange graph).
The MPJPE decreased notably compared to the original network (blue graph), but still increases significantly for increasing offsets $dx$.

In another attempt to reduce the MPJPE, the modified network presented above is trained from ground up.
Similar to \autoref{sec:results-augmented}, the discriminator still receives poses which are already naturally normalized in location.
Since the generator now produces 3D poses which are not necessarily aligned with the origin of the coordinate system, but may have offsets in x or y dimension, the poses have to be normalized.
For this, the 3D poses' root joints are aligned with the origin, and then fed to the Random Projection Layer as before.
For training, the same hyperparameters as described in \autoref{sec:evaluation} are used.

For an offset of $dx = 0$ the MPJPE is slightly higher than for the original network ($59.1$mm vs $54.8$mm).
However, for larger offsets along the x axis, the MPJPE is now reduced significantly.
A plot of the resulting curve is depicted in \autoref{fig:x-shift-error-correct-reproj} (red graph).
For a camera angle of approximately $63$ degrees ($10$m offset at a camera distance of $5m$) the MPJPE now is only at $82$mm, compared to the previous $350$mm.


\input{figures/x_shift_correct_reprojection}

\subsection{Network without Root Joint Alignment}
ambiguities
The correct re-projection of the 2D points into three dimensions without further adaption of the network is already able to reduce the MPJPE for shifted poses.
In an attempt to achieve the same MPJPE for all offsets $dx$, the network receives an additional piece of information.
On top of the correct re-projection, the vector $(dx, dy$ is now passed to the network alongside the 2D input pose.
In theory this should eliminate any ambiguities existing because of the normalization.

The network's input is now a vector of size $32$. 
The first $30$ elements are the coordinates of the normalized input pose's 15 joints, and the last two elements are the offsets $dx$ and $dy$.
During training the generator receives poses which have an offset $dx$ between $-10$m and $10$m.
As before, in order to avoid sampling offsets for the Random Projection Layer, the discriminator receives only such 2D poses which have an offset of $dx = 0$, while $dy = 0$.

Experimental results showed that\dots

New network tested with Human3.6M monocular 2D poses.

\unsure{New network trained with same images for generator and discriminator}

\Todo[inline]{This is why the inclusion of the root joint into the network was important.}

These results conclude the section, and the thesis.
The next section provides a summary over the results from each chapter.
